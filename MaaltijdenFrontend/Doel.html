<!DOCTYPE html>
<html>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>


<head>

      
                <style>
                    
                    html {
                        background: url(Achtergrond2.jpg) no-repeat center center fixed;
                        -webkit-background-size: cover;
                        -moz-background-size: cover;
                        -o-background-size: cover;
                        background-size: cover;
                        
                    }
            
            
                    
                </style>
                <script src="jquery-3.4.1.js"></script>
                <link rel="stylesheet" href="styleSheet.css">
      










    <script type="text/javascript">

        var date = new Date();
        var date_1 = new Date(new Date().setDate(new Date().getDate() - 1));
        var date_2 = new Date(new Date().setDate(new Date().getDate() - 2));
        var date_3 = new Date(new Date().setDate(new Date().getDate() - 3));
        var date_4 = new Date(new Date().setDate(new Date().getDate() - 4));
        var date_5 = new Date(new Date().setDate(new Date().getDate() - 5));
        var date_6 = new Date(new Date().setDate(new Date().getDate() - 6));

        var today = date.getDate() + "-" + (date.getMonth() + 1);
        var today_1 = date_1.getDate() + "-" + (date.getMonth() + 1);
        var today_2 = date_2.getDate() + "-" + (date.getMonth() + 1);
        var today_3 = date_3.getDate() + "-" + (date.getMonth() + 1);
        var today_4 = date_4.getDate() + "-" + (date.getMonth() + 1);
        var today_5 = date_5.getDate() + "-" + (date.getMonth() + 1);
        var today_6 = date_6.getDate() + "-" + (date.getMonth() + 1);

        var todayCalTotal = 0;
        var today_1CalTotal = 0;
        var today_2CalTotal = 0;
        var today_3CalTotal = 0;
        var today_4CalTotal = 0;
        var today_5CalTotal = 0;
        var today_6CalTotal = 0;

        var todayCalBurnedTotal = 0;
        var today_1CalBurnedTotal = 0;
        var today_2CalBurnedTotal = 0;
        var today_3CalBurnedTotal = 0;
        var today_4CalBurnedTotal = 0;
        var today_5CalBurnedTotal = 0;
        var today_6CalBurnedTotal = 0;

        //Load json maaltijd
        window.onload = maaltijdInfo(), sessieInfo();
        var maaltijdenLijst;
        function maaltijdInfo() {

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    // document.getElementById("completeMaaltijd").innerHTML = this.responseText;
                    var maaltijdenLijstJSON = this.responseText;
                    maaltijdenLijst = JSON.parse(maaltijdenLijstJSON);
                    console.log(maaltijdenLijst);
                }
            }
            xhr.open("GET", "http://localhost:8082/alleMaaltijden", true);
            xhr.send();
        }

        var trainingLijst;
        //Load json Sessie
        function sessieInfo() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {

                    var trainingLijstJSON = this.responseText;
                    trainingLijst = JSON.parse(trainingLijstJSON);
                    console.log(trainingLijst);
                }
            }
            xhr.open("GET", "http://localhost:8082/Sessies", true);
            xhr.send();
        }

        function createCharts() {
            for (i = 0; i < maaltijdenLijst.length; i++) {
                
                maalDag = (maaltijdenLijst[i].dag + "-" + maaltijdenLijst[i].maand);

                if (today == maalDag) {
                    todayCalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(todayCalTotal);
                    continue;
                } else if (today_1 == maalDag) {
                    today_1CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_1CalTotal);
                    continue;
                } else if (today_2 == maalDag) {
                    today_2CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_2CalTotal);
                    continue;
                } else if (today_3 == maalDag) {
                    today_3CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_3CalTotal);
                    continue;
                } else if (today_4 == maalDag) {
                    today_4CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_4CalTotal);
                    continue;
                } else if (today_5 == maalDag) {
                    today_5CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_5CalTotal);
                    continue;
                } else if (today_6 == maalDag) {
                    today_6CalTotal += maaltijdenLijst[i].caloriesPerPortion;
                    console.log(today_6CalTotal);
                    continue;
                }

            }

            for (i = 0; i < trainingLijst.length; i++) {
                //if(today.equals)
                maalDag = (trainingLijst[i].dag + "-" + trainingLijst[i].maand);

                if (today == maalDag) {
                    todayCalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(todayCalBurnedTotal);
                    continue;
                } else if (today_1 == maalDag) {
                    today_1CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_1CalBurnedTotal);
                    continue;
                } else if (today_2 == maalDag) {
                    today_2CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_2CalBurnedTotal);
                    continue;
                } else if (today_3 == maalDag) {
                    today_3CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_3CalBurnedTotal);
                    continue;
                } else if (today_4 == maalDag) {
                    today_4CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_4CalBurnedTotal);
                    continue;
                } else if (today_5 == maalDag) {
                    today_5CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_5CalBurnedTotal);
                    continue;
                } else if (today_6 == maalDag) {
                    today_6CalBurnedTotal += trainingLijst[i].calVerbrand;
                    console.log(today_6CalBurnedTotal);
                    continue;
                }
            }


            var chart = new CanvasJS.Chart("chartContainer", {


                title: {
                    text: "Overzicht calorieen gegeten vs verbrand per dag"
                },
                data: [
                    {
                        // Change type to "doughnut", "line", "splineArea", etc.

                        type: "column",
                        dataPoints: [
                            { label: today_6, y: today_6CalTotal },
                            { label: today_5, y: today_5CalTotal },
                            { label: today_4, y: today_4CalTotal },
                            { label: today_3, y: today_3CalTotal },
                            { label: today_2, y: today_2CalTotal },
                            { label: today_1, y: today_1CalTotal },
                            { label: today, y: todayCalTotal },
                        ]
                    },
                    { //dataSeries - second quarter

                        type: "column",
                        dataPoints: [
                            { label: today_6, y: today_6CalBurnedTotal },
                            { label: today_5, y: today_5CalBurnedTotal },
                            { label: today_4, y: today_4CalBurnedTotal },
                            { label: today_3, y: today_3CalBurnedTotal },
                            { label: today_2, y: today_2CalBurnedTotal },
                            { label: today_1, y: today_1CalBurnedTotal },
                            { label: today, y: todayCalBurnedTotal }
                        ]
                    }
                ]
            });
            chart.render();
        }
    </script>


    <link rel="stylesheet" href="styleSheet.css">
</head>

<body>
    <br>
    <form action=index.html>
        <button class="button2"><span> &#x1F3E0 </span></button>
    </form>
    <form action=nieuweGebruiker.html>
        <button class="button"><span>Nieuwe Gebruiker / Inloggen </span></button>
    </form>

    <form action=Schema.html>
        <button class="button"><span>Mijn Schema's</span></button>
    </form>

    <form action=Maaltijden.html>
        <button class="button"><span>Mijn Maaltijden</span></button>
    </form>

    <form action=Doel.html>
        <button class="button"><span>Mijn Doel</span></button>
    </form>
    <br><br><br><br><br><br>
    <div id="chartContainer" style="height: 300px; width: 100%;"></div>

    <button class=button2 onclick='createCharts()'> &#x1F4CA</button>

</body>

</html>